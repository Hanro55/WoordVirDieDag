<!DOCTYPE html>
<html lang="af">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WoorVirDieDag</title>
  <style>
    body {
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      background: #f4f4f4;
      margin: 0;
      padding: 1rem;
    }
    h1 {
      margin-bottom: 0.5rem;
    }
    #game {
      display: grid;
      grid-template-columns: repeat(5, 60px);
      gap: 5px;
      margin: 20px 0;
    }
    .tile {
      width: 60px;
      height: 60px;
      background: white;
      border: 2px solid #ccc;
      font-size: 2rem;
      text-transform: uppercase;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
    }
    .correct { background: #6aaa64; color: white; }
    .present { background: #c9b458; color: white; }
    .absent  { background: #787c7e; color: white; }

    #keyboard-container {
      width: 100%;
      max-width: 500px;
      margin: 10px auto;
    }
    #keyboard div {
      display: flex;
      justify-content: center;
      margin-bottom: 5px;
    }
    .key {
      padding: 10px;
      background: #ddd;
      text-align: center;
      border-radius: 5px;
      margin: 2px;
      flex: 1;
      font-weight: bold;
      font-size: 1rem;
      min-width: 10%;
      max-width: 10%;
    }
    .key:active {
      background: #bbb;
    }

    #message {
      margin-top: 10px;
      font-weight: bold;
      color: #444;
    }

    @media (max-width: 600px) {
      .tile {
        width: 50px;
        height: 50px;
        font-size: 1.5rem;
      }
    }
  </style>
</head>
<body>
  <h1>WoorVirDieDag</h1>
  <div id="game"></div>
  <div id="keyboard-container">
    <div id="keyboard"></div>
  </div>
  <div id="message"></div>

  <script>
    const wordList = ['plant', 'bome', 'droom', 'skaap', 'blink', 'vloer', 'klank', 'groot', 'lekker', 'swart'];
    const today = new Date().toISOString().split('T')[0];
    const wordIndex = Math.floor(new Date(today).getTime() / (1000 * 60 * 60 * 24)) % wordList.length;
    const secretWord = wordList[wordIndex];

    let currentGuess = '';
    let guesses = [];
    const maxGuesses = 6;

    const game = document.getElementById('game');
    const keyboard = document.getElementById('keyboard');
    const message = document.getElementById('message');

    function drawGrid() {
      game.innerHTML = '';
      for (let i = 0; i < maxGuesses * 5; i++) {
        const tile = document.createElement('div');
        tile.className = 'tile';
        game.appendChild(tile);
      }
    }

    function updateGrid() {
      const tiles = document.querySelectorAll('.tile');
      tiles.forEach((tile, i) => {
        const row = Math.floor(i / 5);
        const col = i % 5;
        const letter = guesses[row]?.[col] ?? (row === guesses.length ? currentGuess[col] : '');
        tile.textContent = letter ?? '';
        if (guesses[row]) {
          const result = getLetterResult(guesses[row], secretWord, col);
          tile.classList.add(result);
        }
      });
    }

    function getLetterResult(guess, word, index) {
      if (guess[index] === word[index]) return 'correct';
      else if (word.includes(guess[index])) return 'present';
      else return 'absent';
    }

    function handleKey(letter) {
      if (letter === '‚Üê') {
        currentGuess = currentGuess.slice(0, -1);
      } else if (letter === 'OK') {
        if (currentGuess.length !== 5) return showMessage('Gebruik 5 letters');
        if (!wordList.includes(currentGuess)) return showMessage('Nie in woordelys nie');
        guesses.push(currentGuess);
        if (currentGuess === secretWord) {
          showMessage('üéâ Jy het dit reg!');
          saveStats(true);
        } else if (guesses.length === maxGuesses) {
          showMessage('Verloor! Die woord was: ' + secretWord);
          saveStats(false);
        }
        currentGuess = '';
      } else if (currentGuess.length < 5) {
        currentGuess += letter.toLowerCase();
      }
      updateGrid();
    }

    function showMessage(msg) {
      message.textContent = msg;
    }

    function saveStats(won) {
      let stats = JSON.parse(localStorage.getItem('woordStats') || '{}');
      stats.games = (stats.games || 0) + 1;
      stats.wins = (stats.wins || 0) + (won ? 1 : 0);
      localStorage.setItem('woordStats', JSON.stringify(stats));
    }

    function drawKeyboard() {
      const rows = [
        'QWERTYUIOP',
        'ASDFGHJKL',
        '‚ÜêZXCVBNMOK'
      ];

      keyboard.innerHTML = '';
      rows.forEach(row => {
        const rowDiv = document.createElement('div');
        row.split('').forEach(letter => {
          const btn = document.createElement('div');
          btn.className = 'key';
          btn.textContent = letter;
          btn.onclick = () => handleKey(letter);
          rowDiv.appendChild(btn);
        });
        keyboard.appendChild(rowDiv);
      });
    }

    drawGrid();
    drawKeyboard();
    updateGrid();
  </script>
</body>
</html>
