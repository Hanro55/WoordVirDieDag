<!DOCTYPE html>
<html lang="af">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Woord van die Dag</title>
  <style>
    body {
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      background: #f3f3f3;
    }
    h1 {
      text-align: center;
      margin-bottom: 10px;
    }
    #game {
      display: grid;
      grid-template-columns: repeat(5, minmax(40px, 60px));
      gap: 5px;
      margin-bottom: 20px;
    }
    .tile {
      width: 100%;
      aspect-ratio: 1;
      background: white;
      border: 2px solid #ccc;
      font-size: 1.5rem;
      text-align: center;
      line-height: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      text-transform: uppercase;
    }
    .correct { background: #6aaa64; color: white; }
    .present { background: #c9b458; color: white; }
    .absent  { background: #787c7e; color: white; }

    #keyboard {
      display: grid;
      grid-template-columns: repeat(10, 1fr);
      gap: 5px;
      max-width: 500px;
      margin: 0 auto 10px;
    }
    .key {
      padding: 12px 0;
      background: #ddd;
      text-align: center;
      cursor: pointer;
      border-radius: 5px;
      user-select: none;
      font-weight: bold;
    }
    .key:active {
      background: #bbb;
    }
    #message {
      margin: 10px;
      color: #333;
    }
    #submitBtn {
      padding: 12px 24px;
      font-size: 1rem;
      background: #6aaa64;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 10px;
    }
    #submitBtn:active {
      background: #5a9956;
    }
  </style>
</head>
<body>
  <h1>Woord van die Dag üáøüá¶</h1>
  <div id="game"></div>
  <div id="message"></div>
  <div id="keyboard"></div>
  <button id="submitBtn">Voer in</button>

  <script>
    const wordList = ['plant', 'bome', 'droom', 'skaap', 'blink', 'vloer', 'klank', 'groot', 'lekker', 'swart'];
    const today = new Date().toISOString().split('T')[0];
    const wordIndex = Math.floor(new Date(today).getTime() / (1000 * 60 * 60 * 24)) % wordList.length;
    const secretWord = wordList[wordIndex];

    let currentGuess = '';
    let guesses = [];
    const maxGuesses = 6;

    const game = document.getElementById('game');
    const keyboard = document.getElementById('keyboard');
    const message = document.getElementById('message');
    const submitBtn = document.getElementById('submitBtn');

    function drawGrid() {
      game.innerHTML = '';
      for (let i = 0; i < maxGuesses * 5; i++) {
        const tile = document.createElement('div');
        tile.className = 'tile';
        game.appendChild(tile);
      }
    }

    function updateGrid() {
      const tiles = document.querySelectorAll('.tile');
      tiles.forEach((tile, i) => {
        const row = Math.floor(i / 5);
        const col = i % 5;
        const letter = guesses[row]?.[col] ?? (row === guesses.length ? currentGuess[col] : '');
        tile.textContent = letter ?? '';
        tile.className = 'tile'; // Reset classes
        if (guesses[row]) {
          const result = getLetterResult(guesses[row], secretWord, col);
          tile.classList.add(result);
        }
      });
    }

    function getLetterResult(guess, word, index) {
      if (guess[index] === word[index]) return 'correct';
      else if (word.includes(guess[index])) return 'present';
      else return 'absent';
    }

    function submitGuess() {
      if (currentGuess.length !== 5) return showMessage('Gebruik 5 letters');
      if (!wordList.includes(currentGuess)) return showMessage('Nie in woordelys nie');
      guesses.push(currentGuess);
      if (currentGuess === secretWord) {
        showMessage('üéâ Jy het dit reg!');
        saveStats(true);
      } else if (guesses.length === maxGuesses) {
        showMessage('Verloor! Die woord was: ' + secretWord);
        saveStats(false);
      }
      currentGuess = '';
      updateGrid();
    }

    function handleKey(letter) {
      if (letter === '‚Üê') {
        currentGuess = currentGuess.slice(0, -1);
      } else if (letter === 'OK') {
        submitGuess();
      } else if (currentGuess.length < 5) {
        currentGuess += letter.toLowerCase();
      }
      updateGrid();
    }

    function showMessage(msg) {
      message.textContent = msg;
    }

    function saveStats(won) {
      let stats = JSON.parse(localStorage.getItem('woordStats') || '{}');
      stats.games = (stats.games || 0) + 1;
      stats.wins = (stats.wins || 0) + (won ? 1 : 0);
      localStorage.setItem('woordStats', JSON.stringify(stats));
    }

    function drawKeyboard() {
      const layout = [
        ...'QWERTYUIOP'.split(''),
        ...'ASDFGHJKL'.split(''),
        ...'‚ÜêZXCVBNMOK'.split('')
      ];
      layout.forEach(key => {
        const btn = document.createElement('div');
        btn.className = 'key';
        btn.textContent = key;
        btn.onclick = () => handleKey(key);
        keyboard.appendChild(btn);
      });
    }

    submitBtn.addEventListener('click', submitGuess);

    drawGrid();
    drawKeyboard();
    updateGrid();
  </script>
</body>
</html>
